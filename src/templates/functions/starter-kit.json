{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "siteName": {
            "type": "string",
            "metadata": {
                "description": "Name of the site into which the function should be deployed"
            }
        },
        "functionName": {
            "type": "string",
            "metadata": {
                "description": "name of the function"
            },
            "defaultValue": "starterKit"
        }
    },
    "variables": {
        "name": {
            "site": "[parameters('siteName')]",
            "function": "[parameters('functionName')]"
        },
        "apiVersions": {
            "functions": "2016-08-01"
        },
        "code": {
            "run_csx": "I3IgIk1pY3Jvc29mdC5XaW5kb3dzQXp1cmUuU3RvcmFnZSIKI3IgIlN5c3RlbS5JTy5Db21wcmVzc2lvbi5GaWxlc3lzdGVtIgoKI2xvYWQgImNvbnN0YW50cy5jc3giCgp1c2luZyBTeXN0ZW0uTmV0Owp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgU3lzdGVtLlRleHQ7CnVzaW5nIFN5c3RlbS5JTy5Db21wcmVzc2lvbjsKdXNpbmcgTWljcm9zb2Z0LldpbmRvd3NBenVyZS5TdG9yYWdlOwp1c2luZyBNaWNyb3NvZnQuV2luZG93c0F6dXJlLlN0b3JhZ2UuVGFibGU7CgpwdWJsaWMgc3RhdGljIGFzeW5jIFRhc2s8SHR0cFJlc3BvbnNlTWVzc2FnZT4gUnVuKEh0dHBSZXF1ZXN0TWVzc2FnZSByZXEsIENsb3VkVGFibGUgc2V0dGluZ1RhYmxlLCBUcmFjZVdyaXRlciBsb2csIEV4ZWN1dGlvbkNvbnRleHQgZXhlY3V0aW9uQ29udGV4dCkKewoKICAgIC8vIEdldCBhbGwgdGhlIHNldHRpbmdzIGZyb20gdGhlIHRhYmxlIGludG8gYSBoYXNodGFibGUKICAgIERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+IEFNQSA9IEdldEFNQShzZXR0aW5nVGFibGUpOwoKICAgIC8vIENyZWF0ZSBkaXJlY3Rvcnkgc3RydWN0dXJlIGZvciB0aGUgZmlsZXMgdGhhdCBuZWVkIHRvIGJlIHppcHBlZCB1cAogICAgc3RyaW5nIGNoZWZfcmVwb19wYXRoID0gUGF0aC5Db21iaW5lKGV4ZWN1dGlvbkNvbnRleHQuRnVuY3Rpb25EaXJlY3RvcnksICJjaGVmLXJlcG8iKTsKCiAgICAvLyBkZWxldGUgdGhlIHJlcG8gcGF0aCBpZiBpdCBhbHJlYWR5IGV4aXN0cwogICAgaWYgKERpcmVjdG9yeS5FeGlzdHMoY2hlZl9yZXBvX3BhdGgpKQogICAgewogICAgICAgIERpcmVjdG9yeS5EZWxldGUoY2hlZl9yZXBvX3BhdGgsIHRydWUpOwogICAgfQoKICAgIC8vIEJhc2U2NCBkZWNvZGUgdGhlIHVzZXIga2V5IGFuZCBzZXQgdGhlIHBhdGggdG8gdGhlIGZpbGUKICAgIHN0cmluZyBjbGllbnRfa2V5X2ZpbGVuYW1lID0gU3RyaW5nLkZvcm1hdCgiezB9LnBlbSIsIEFNQVtVc2VyS2V5XSk7CiAgICBzdHJpbmcgY2xpZW50X2tleV9wYXRoID0gUGF0aC5Db21iaW5lKGNoZWZfcmVwb19wYXRoLCAiLmNoZWYiLCBjbGllbnRfa2V5X2ZpbGVuYW1lKTsKICAgIHN0cmluZyB1c2VyX2tleSA9IEVuY29kaW5nLlVURjguR2V0U3RyaW5nKENvbnZlcnQuRnJvbUJhc2U2NFN0cmluZyhBTUFbVXNlcktleUtleV0pKTsKCiAgICAvLyBCYXNlNjQgZGVjb2RlIHRoZSB2YWxpZGF0b3Iga2V5IGFuZCBzZXQgdGhlIHBhdGggdG8gdGhlIGZpbGUKICAgIHN0cmluZyB2YWxpZGF0b3Jfa2V5X2ZpbGVuYW1lID0gU3RyaW5nLkZvcm1hdCgiezB9LXZhbGlkYXRvci5wZW0iLCBBTUFbT3JnS2V5XSk7CiAgICBzdHJpbmcgdmFsaWRhdG9yX2tleV9wYXRoID0gUGF0aC5Db21iaW5lKGNoZWZfcmVwb19wYXRoLCAiLmNoZWYiLCB2YWxpZGF0b3Jfa2V5X2ZpbGVuYW1lKTsKICAgIHN0cmluZyB2YWxpZGF0b3Jfa2V5ID0gRW5jb2RpbmcuVVRGOC5HZXRTdHJpbmcoQ29udmVydC5Gcm9tQmFzZTY0U3RyaW5nKEFNQVtPcmdLZXlLZXldKSk7CgogICAgLy8gRW5zdXJlIHRoYXQgdGhlIHBhcmVudCBmb3IgdGhlIGNsaWVudF9rZXlfcGF0aCBleGlzdHMKICAgIGlmICghRGlyZWN0b3J5LkV4aXN0cyhEaXJlY3RvcnkuR2V0UGFyZW50KGNsaWVudF9rZXlfcGF0aCkuVG9TdHJpbmcoKSkpCiAgICB7CiAgICAgICAgRGlyZWN0b3J5LkNyZWF0ZURpcmVjdG9yeShEaXJlY3RvcnkuR2V0UGFyZW50KGNsaWVudF9rZXlfcGF0aCkuVG9TdHJpbmcoKSk7CiAgICB9CgogICAgLy8gV3JpdGUgdGhlIGNsaWVudCBhbmQgdmFsaWRhdGlvbiBrZXlzIG91dCB0byBhIGZpbGUKICAgIEZpbGUuV3JpdGVBbGxUZXh0KGNsaWVudF9rZXlfcGF0aCwgdXNlcl9rZXkpOwogICAgRmlsZS5Xcml0ZUFsbFRleHQodmFsaWRhdG9yX2tleV9wYXRoLCB2YWxpZGF0b3Jfa2V5KTsKCiAgICAvLyBDcmVhdGUgdGhlIENoZWYgQXV0b21hdGUgY3JlZGVudGlhbHMgZmlsZQogICAgc3RyaW5nIGNyZWRlbnRpYWxzX3BhdGggPSBQYXRoLkNvbWJpbmUoY2hlZl9yZXBvX3BhdGgsICJjcmVkZW50aWFscy50eHQiKTsKICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgc2IuQXBwZW5kTGluZShTdHJpbmcuRm9ybWF0KCJDaGVmIFNlcnZlciBVUkw6IGh0dHBzOi8vezB9L29yZ2FuaXphdGlvbnMvezF9IiwgQU1BW0NoZWZTZXJ2ZXJGUUROS2V5XSwgQU1BW09yZ0tleV0pKTsKICAgIHNiLkFwcGVuZExpbmUoU3RyaW5nLkZvcm1hdCgiVXNlciB1c2VybmFtZTogezB9IiwgQU1BW1VzZXJLZXldKSk7CiAgICBzYi5BcHBlbmRMaW5lKFN0cmluZy5Gb3JtYXQoIlVzZXIgcGFzc3dvcmQ6IHswfSIsIEFNQVtVc2VyUGFzc3dvcmRLZXldKSk7CiAgICBzYi5BcHBlbmRMaW5lKCk7CiAgICBzYi5BcHBlbmRMaW5lKFN0cmluZy5Gb3JtYXQoIkF1dG9tYXRlIFVSTDogaHR0cHM6Ly97MH0iLCBBTUFbQXV0b21hdGVTZXJ2ZXJGUUROS2V5XSkpOwogICAgc2IuQXBwZW5kTGluZShTdHJpbmcuRm9ybWF0KCJBdXRvbWF0ZSBhZG1pbiB1c2VybmFtZTogezB9IiwgQU1BW0F1dG9tYXRlQ3JlZGVudGlhbHNBZG1pblVzZXJuYW1lS2V5XSkpOwogICAgc2IuQXBwZW5kTGluZShTdHJpbmcuRm9ybWF0KCJBdXRvbWF0ZSBhZG1pbiBwYXNzd29yZDogezB9IiwgQU1BW0F1dG9tYXRlQ3JlZGVudGlhbHNBZG1pblBhc3N3b3JkS2V5XSkpOwogICAgc2IuQXBwZW5kTGluZSgpOwogICAgc2IuQXBwZW5kTGluZShTdHJpbmcuRm9ybWF0KCJDaGVmIFNlcnZlciBJbnRlcm5hbCBJUCBBZGRyZXNzOiB7MH0iLCBBTUFbQ2hlZlNlcnZlckludGVybmFsSVBBZGRyZXNzXSkpOwogICAgc2IuQXBwZW5kTGluZShTdHJpbmcuRm9ybWF0KCJBdXRvbWF0ZSBTZXJ2ZXIgSW50ZXJuYWwgSVAgQWRkcmVzczogezB9IiwgQU1BW0F1dG9tYXRlU2VydmVySW50ZXJuYWxJUEFkZHJlc3NLZXldKSk7CiAgICBGaWxlLldyaXRlQWxsVGV4dChjcmVkZW50aWFsc19wYXRoLCBzYi5Ub1N0cmluZygpKTsKICAgIAoKICAgIC8vIFJlYWQgaW4gdGhlIGtuaWZlIGZpbGUgYW5kIHBhdGNoIGl0IHNvIHRoYXQgaXQgaGFzIHRoZSBjb3JyZWN0IHZhbHVlcwogICAgc3RyaW5nIGtuaWZlX2NvbmZpZyA9IEZpbGUuUmVhZEFsbFRleHQoUGF0aC5Db21iaW5lKGV4ZWN1dGlvbkNvbnRleHQuRnVuY3Rpb25EaXJlY3RvcnksICJrbmlmZS5yYiIpKTsKCiAgICBrbmlmZV9jb25maWcgPSBrbmlmZV9jb25maWcuUmVwbGFjZSgie3sgTk9ERV9OQU1FIH19IiwgQU1BW1VzZXJLZXldKTsKICAgIGtuaWZlX2NvbmZpZyA9IGtuaWZlX2NvbmZpZy5SZXBsYWNlKCJ7eyBDTElFTlRfS0VZX0ZJTEVOQU1FIH19IiwgY2xpZW50X2tleV9maWxlbmFtZSk7CiAgICBrbmlmZV9jb25maWcgPSBrbmlmZV9jb25maWcuUmVwbGFjZSgie3sgT1JHX1ZBTElEQVRPUl9OQU1FIH19IiwgU3RyaW5nLkZvcm1hdCgiezB9LXZhbGlkYXRvciIsIEFNQVtPcmdLZXldKSk7CiAgICBrbmlmZV9jb25maWcgPSBrbmlmZV9jb25maWcuUmVwbGFjZSgie3sgT1JHX0tFWV9GSUxFTkFNRSB9fSIsIHZhbGlkYXRvcl9rZXlfZmlsZW5hbWUpOwogICAga25pZmVfY29uZmlnID0ga25pZmVfY29uZmlnLlJlcGxhY2UoInt7IENIRUZfU0VSVkVSX1VSTCB9fSIsIFN0cmluZy5Gb3JtYXQoImh0dHBzOi8vezB9L29yZ2FuaXphdGlvbnMvezF9IiwgQU1BW0NoZWZTZXJ2ZXJGUUROS2V5XSwgQU1BW09yZ0tleV0pKTsKCiAgICAvLyBXcml0ZSBvdXQgdGhlIGtuaWZlIGZpbGUgdG8gdGhlIHJlcG8gZGlyZWN0b3lyCiAgICBzdHJpbmcga25pZmVfZmlsZV9wYXRoID0gUGF0aC5Db21iaW5lKGNoZWZfcmVwb19wYXRoLCAiLmNoZWYiLCAia25pZmUucmIiKTsKICAgIEZpbGUuV3JpdGVBbGxUZXh0KGtuaWZlX2ZpbGVfcGF0aCwga25pZmVfY29uZmlnKTsKCiAgICAvLyBaaXAgdXAgdGhlIGRpcmVjdG9yeQogICAgc3RyaW5nIHppcF9wYXRoID0gUGF0aC5Db21iaW5lKGV4ZWN1dGlvbkNvbnRleHQuRnVuY3Rpb25EaXJlY3RvcnksICJzdGFydGVyX2tpdC56aXAiKTsKCiAgICAvLyBEZWxldGUgdGhlIHppcCBpZiBpdCBhbHJlYWR5IGV4aXN0cwogICAgaWYgKEZpbGUuRXhpc3RzKHppcF9wYXRoKSkKICAgIHsKICAgICAgICBGaWxlLkRlbGV0ZSh6aXBfcGF0aCk7CiAgICB9CgogICAgWmlwRmlsZS5DcmVhdGVGcm9tRGlyZWN0b3J5KGNoZWZfcmVwb19wYXRoLCB6aXBfcGF0aCk7CgogICAgLy8gVHVybiB0aGUgWmlwIGZpbGUgaW50byBhIGJ5dGUgYXJyYXkKICAgIHZhciBkYXRhQnl0ZXMgPSBGaWxlLlJlYWRBbGxCeXRlcyh6aXBfcGF0aCk7CiAgICB2YXIgZGF0YVN0cmVhbSA9IG5ldyBNZW1vcnlTdHJlYW0oZGF0YUJ5dGVzKTsKCiAgICAvLyBCdWlsZCB1cCB0aGUgcmVzcG9uc2Ugc28gdGhhdCB0aGUgemlwIGZpbGUgY2FuIGJlIHJldHVybmVkCiAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlID0gbmV3IEh0dHBSZXNwb25zZU1lc3NhZ2UoSHR0cFN0YXR1c0NvZGUuT0spOwogICAgcmVzcG9uc2UuQ29udGVudCA9IG5ldyBTdHJlYW1Db250ZW50KGRhdGFTdHJlYW0pOwogICAgcmVzcG9uc2UuQ29udGVudC5IZWFkZXJzLkNvbnRlbnREaXNwb3NpdGlvbiA9IG5ldyBTeXN0ZW0uTmV0Lkh0dHAuSGVhZGVycy5Db250ZW50RGlzcG9zaXRpb25IZWFkZXJWYWx1ZSgiYXR0YWNobWVudCIpOwogICAgcmVzcG9uc2UuQ29udGVudC5IZWFkZXJzLkNvbnRlbnREaXNwb3NpdGlvbi5GaWxlTmFtZSA9ICJzdGFydGVyX2tpdC56aXAiOwogICAgcmVzcG9uc2UuQ29udGVudC5IZWFkZXJzLkNvbnRlbnRUeXBlID0gbmV3IFN5c3RlbS5OZXQuSHR0cC5IZWFkZXJzLk1lZGlhVHlwZUhlYWRlclZhbHVlKCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iKTsKCiAgICAvLyBSZW1vdmUgdGhlIGNoZWZfcmVwbyBkaXJlY3RvcnkgYW5kIHRoZSBzdGFydGVyIGtpdAogICAgRGlyZWN0b3J5LkRlbGV0ZShjaGVmX3JlcG9fcGF0aCwgdHJ1ZSk7CiAgICBGaWxlLkRlbGV0ZSh6aXBfcGF0aCk7CgogICAgcmV0dXJuIHJlc3BvbnNlOwp9CgpwdWJsaWMgc3RhdGljIERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+IEdldEFNQSAoQ2xvdWRUYWJsZSBzZXR0aW5nVGFibGUpIHsKCiAgICAvLyBJbml0aWFsaXNlIHRoZSBkaWN0aW9uYXJ5IHRoYXQgaXMgdG8gYmUgcmV0dXJuZWQKICAgIERpY3Rpb25hcnk8c3RyaW5nLCBzdHJpbmc+IEFNQSA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgc3RyaW5nPigpOwoKICAgIC8vIGNyZWF0ZSBhIHRhYmxlIHF1ZXJ5IHRvIGdldCBhbGwgdGhlIGluZm9ybWF0aW9uIGZyb20gdGhlIHRhYmxlCiAgICBUYWJsZVF1ZXJ5PENvbmZpZ0tWPiBxdWVyeSA9IG5ldyBUYWJsZVF1ZXJ5PENvbmZpZ0tWPigpLldoZXJlKFRhYmxlUXVlcnkuR2VuZXJhdGVGaWx0ZXJDb25kaXRpb24oIlBhcnRpdGlvbktleSIsIFF1ZXJ5Q29tcGFyaXNvbnMuRXF1YWwsIFBhcnRpdGlvbktleSkpOwoKICAgIC8vIGl0ZXJhdGUgYXJvdW5kIHRoZSB0YWJsZSBhbmQgZ2V0IGFsbCB0aGUgcmVxdWlyZWQgdmFsdWVzCiAgICBUYWJsZUNvbnRpbnVhdGlvblRva2VuIHRva2VuID0gbnVsbDsKICAgIGRvCiAgICB7CiAgICAgICAgVGFibGVRdWVyeVNlZ21lbnQ8Q29uZmlnS1Y+IHJlc3VsdFNlZ21lbnQgPSBzZXR0aW5nVGFibGUuRXhlY3V0ZVF1ZXJ5U2VnbWVudGVkKHF1ZXJ5LCB0b2tlbik7CiAgICAgICAgdG9rZW4gPSByZXN1bHRTZWdtZW50LkNvbnRpbnVhdGlvblRva2VuOwoKICAgICAgICBmb3JlYWNoIChDb25maWdLViBpdGVtIGluIHJlc3VsdFNlZ21lbnQuUmVzdWx0cykKICAgICAgICB7CiAgICAgICAgICAgIEFNQS5BZGQoaXRlbS5Sb3dLZXksIGl0ZW0uVmFsdWUpOwogICAgICAgIH0KICAgIH0gd2hpbGUgKHRva2VuICE9IG51bGwpOwoKICAgIHJldHVybiBBTUE7Cgp9CgpwdWJsaWMgY2xhc3MgQ29uZmlnS1YgOiBUYWJsZUVudGl0eSB7CiAgICBwdWJsaWMgc3RyaW5nIFZhbHVlIHsgZ2V0OyBzZXQ7IH0KfQo=",
            "constants_csx": "c3RhdGljIHN0cmluZyBQYXJ0aXRpb25LZXkgPSAiQ2hlZkFNQSI7CgovLyBEZWZpbmUgY2hlZiBzZXJ2ZXIga2V5cwpzdGF0aWMgc3RyaW5nIENoZWZTZXJ2ZXJGUUROS2V5ID0gImNoZWZzZXJ2ZXJfZnFkbiI7CgpzdGF0aWMgc3RyaW5nIENoZWZTZXJ2ZXJJbnRlcm5hbElQQWRkcmVzcyA9ICJjaGVmX2ludGVybmFsX2lwIjsKc3RhdGljIHN0cmluZyBVc2VyS2V5ID0gInVzZXIiOwpzdGF0aWMgc3RyaW5nIFVzZXJLZXlLZXkgPSAidXNlcl9rZXkiOwpzdGF0aWMgc3RyaW5nIFVzZXJQYXNzd29yZEtleSA9ICJ1c2VyX3Bhc3N3b3JkIjsKc3RhdGljIHN0cmluZyBPcmdLZXkgPSAib3JnIjsKc3RhdGljIHN0cmluZyBPcmdLZXlLZXkgPSAib3JnX3ZhbGlkYXRvcl9rZXkiOwoKLy8gRGVmaW5lIGF1dG9tYXRlIHNlcnZlciBrZXlzCnN0YXRpYyBzdHJpbmcgQXV0b21hdGVTZXJ2ZXJGUUROS2V5ID0gImF1dG9tYXRlX2ZxZG4iOwpzdGF0aWMgc3RyaW5nIEF1dG9tYXRlU2VydmVySW50ZXJuYWxJUEFkZHJlc3NLZXkgPSAiYXV0b21hdGVfaW50ZXJuYWxfaXAiOwpzdGF0aWMgc3RyaW5nIEF1dG9tYXRlQ3JlZGVudGlhbHNVUkxLZXkgPSAiYXV0b21hdGVfY3JlZGVudGlhbHNfdXJsIjsKc3RhdGljIHN0cmluZyBBdXRvbWF0ZUNyZWRlbnRpYWxzQWRtaW5Vc2VybmFtZUtleSA9ICJhdXRvbWF0ZV9jcmVkZW50aWFsc191c2VybmFtZSI7CnN0YXRpYyBzdHJpbmcgQXV0b21hdGVDcmVkZW50aWFsc0FkbWluUGFzc3dvcmRLZXkgPSAiYXV0b21hdGVfY3JlZGVudGlhbHNfcGFzc3dvcmQiOwoKCi8vIERlZmluZSB0aGUgbW9uaXRvcmluZyB1c2VyIGtleXMKc3RhdGljIHN0cmluZyBNb25pdG9yVXNlclBhc3N3b3JkS2V5ID0gIm1vbml0b3JfdXNlcl9wYXNzd29yZCI7CnN0YXRpYyBzdHJpbmcgTW9uaXRvcktleUtleSA9ICJtb25pdG9yX2tleSI7CnN0YXRpYyBzdHJpbmcgTW9uaXRvclVzZXJLZXkgPSAibW9uaXRvcl91c2VyIjsK",
            "knife_rb": "Y3VycmVudF9kaXIgPSA6OkZpbGUuZGlybmFtZShfX0ZJTEVfXykKbG9nX2xldmVsICAgICAgICAgICAgICAgIDppbmZvCmxvZ19sb2NhdGlvbiAgICAgICAgICAgICAkc3Rkb3V0Cm5vZGVfbmFtZSAgICAgICAgICAgICAgICAie3sgTk9ERV9OQU1FIH19IgpjbGllbnRfa2V5ICAgICAgICAgICAgICAgOjpGaWxlLmpvaW4oY3VycmVudF9kaXIsICJ7eyBDTElFTlRfS0VZX0ZJTEVOQU1FIH19IikKdmFsaWRhdGlvbl9jbGllbnRfbmFtZSAgICJ7eyBPUkdfVkFMSURBVE9SX05BTUUgfX0iCnZhbGlkYXRpb25fa2V5ICAgICAgICAgICA6OkZpbGUuam9pbihjdXJyZW50X2RpciwgInt7IE9SR19LRVlfRklMRU5BTUUgfX0iKQpjaGVmX3NlcnZlcl91cmwgICAgICAgICAgInt7IENIRUZfU0VSVkVSX1VSTCB9fSIKY29va2Jvb2tfcGF0aCAgICAgICAgICAgIFs6OkZpbGUuam9pbihjdXJyZW50X2RpciwgIi4uL2Nvb2tib29rcyIpXQo="
        }
    },
    "resources": [
        {
            "type": "Microsoft.Web/sites/functions",
            "name": "[concat(variables('name').site, '/', variables('name').function)]",
            "apiVersion": "[variables('apiVersions').functions]",
            "properties": {
                "config": {
                    "bindings": [
                        {
                            "authLevel": "function",
                            "name": "req",
                            "type": "httpTrigger",
                            "direction": "in",
                            "methods": [
                                "get",
                                "post"
                            ]
                        },
                        {
                            "name": "$return",
                            "type": "http",
                            "direction": "out"
                        },
                        {
                            "type": "table",
                            "name": "settingTable",
                            "tableName": "settings",
                            "take": 50,
                            "connection": "AzureWebJobsStorage",
                            "direction": "in"
                        }
                    ],
                    "disabled": false
                },
                "files": {
                    "run.csx": "[base64ToString(variables('code').run_csx)]",
                    "constants.csx": "[base64ToString(variables('code').constants_csx)]",
                    "knife.rb": "[base64ToString(variables('code').knife_rb)]"
                }
            }
        }
    ],
    "outputs": {
        "name": {
            "type": "string",
            "value": "[parameters('functionName')]"
        },
        "apiKey": {
            "type": "string",
            "value": "[listsecrets(resourceId('Microsoft.Web/sites/functions', variables('name').site, variables('name').function), '2016-08-01').key]"
        }
    }
}